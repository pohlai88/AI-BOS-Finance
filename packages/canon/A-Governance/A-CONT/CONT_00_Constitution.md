# CONT_00 â€” AI-BOS Constitution

> **The Supreme Governance Document**  
> Defines the architectural pillars, hierarchy, and immutable laws of the AI-BOS Platform.

---

## ğŸ“‹ Document Control

| Property | Value |
|----------|-------|
| **Canon Code** | CONT_00 |
| **Version** | 1.0.0 |
| **Status** | ğŸŸ¢ ACTIVE |
| **Classification** | SUPREME â€” All other contracts derive from this |
| **Author** | AI-BOS Architecture Team |
| **Last Updated** | 2025-01-15 |

---

## ğŸ›ï¸ Preamble

This Constitution establishes the foundational architecture of **AI-BOS** (Artificial Intelligence Business Operating System) â€” an enterprise-grade platform for AI-governed business operations.

All architectural decisions, contracts, and implementations **MUST** conform to this Constitution. Any conflict between this document and derived contracts shall be resolved in favor of this Constitution.

---

## ğŸ“ Article I: The Six Pillars of AI-BOS

The AI-BOS Platform consists of **six architectural pillars**, each with distinct responsibilities and boundaries:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AI-BOS PLATFORM ARCHITECTURE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚    KERNEL    â”‚â—„â”€â”€â–ºâ”‚    CANON     â”‚â—„â”€â”€â–ºâ”‚      WEB     â”‚                 â”‚
â”‚    â”‚  (Control)   â”‚    â”‚  (Business)  â”‚    â”‚  (Frontend)  â”‚                 â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚                   â”‚                                              â”‚
â”‚           â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚           â”‚            â”‚   MOLECULE   â”‚                                      â”‚
â”‚           â”‚            â”‚  (Cluster)   â”‚                                      â”‚
â”‚           â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚           â”‚                   â”‚                                              â”‚
â”‚           â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚           â”‚            â”‚     CELL     â”‚                                      â”‚
â”‚           â”‚            â”‚ (Transaction)â”‚                                      â”‚
â”‚           â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚           â”‚                                                                  â”‚
â”‚           â–¼                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚    â”‚      DB      â”‚                                                          â”‚
â”‚    â”‚ (Data Fabric)â”‚                                                          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pillar Definitions

| Pillar | Name | Purpose | Location |
|--------|------|---------|----------|
| **1** | **Kernel** | Control Plane â€” Identity, Authorization, Gateway, Audit | `apps/kernel/` |
| **2** | **Canon** | Business Logic Layer â€” Domain-specific operations | `apps/canon/<domain>/` |
| **3** | **Molecule** | Functional Cluster â€” Groups of related Cells | `apps/canon/<domain>/<molecule>/` |
| **4** | **Cell** | Atomic Transaction Unit â€” Single function ledger | `apps/canon/<domain>/<molecule>/<cell>/` |
| **5** | **DB** | Data Fabric â€” Schema governance, migrations, seeds | `apps/db/` |
| **6** | **Web** | Frontend â€” User interface (Next.js App Router) | `apps/web/` |

---

## ğŸ“œ Article II: Pillar Responsibilities

### Section 2.1 â€” Kernel (Control Plane)

**Governing Contract:** [CONT_02_KernelArchitecture.md](./CONT_02_KernelArchitecture.md)

The Kernel is the **Identity-to-Evidence Control Plane** that governs all platform operations.

| Responsibility | Description |
|---------------|-------------|
| **Identity** | Tenant and user authentication (JWT, sessions) |
| **Authorization** | Role-Based Access Control (RBAC) |
| **Gateway** | Request routing, rate limiting, circuit breaking |
| **Audit** | Immutable event logging (`kernel.audit_events`) |
| **Cell Registry** | Registration and health monitoring of Cells |

**Non-Negotiables:**
- âŒ Kernel MUST NOT contain business logic
- âŒ Kernel MUST NOT directly access business data
- âœ… Kernel MUST authenticate every request
- âœ… Kernel MUST log every state-changing action

---

### Section 2.2 â€” Canon (Business Logic Layer)

**Location:** `apps/canon/<domain>/`

Canons represent **bounded contexts** in Domain-Driven Design. Each Canon encapsulates a complete business domain.

| Canon | Domain | Status |
|-------|--------|--------|
| `finance/` | Financial Operations | ğŸŸ¡ Active |
| `hrm/` | Human Resource Management | â¬œ Planned |
| `crm/` | Customer Relationship Management | â¬œ Planned |
| `scm/` | Supply Chain Management | â¬œ Planned |

**Non-Negotiables:**
- âŒ Canons MUST NOT share database tables across domains
- âŒ Canons MUST NOT bypass Kernel for authentication
- âœ… Canons MUST expose APIs via the Kernel Gateway
- âœ… Canons MUST emit domain events for cross-domain communication

---

### Section 2.3 â€” Molecule (Functional Cluster)

**Location:** `apps/canon/<domain>/<molecule>/`

Molecules group related Cells into functional clusters. They represent sub-domains within a Canon.

| Example | Canon | Molecule | Description |
|---------|-------|----------|-------------|
| `accounts-payable/` | Finance | AP | Vendor payments, approvals |
| `accounts-receivable/` | Finance | AR | Customer invoicing, collections |
| `treasury/` | Finance | Treasury | Cash pooling, FX |
| `general-ledger/` | Finance | GL | Journal entries, reconciliation |

**Non-Negotiables:**
- âŒ Molecules MUST NOT have cross-molecule database joins
- âœ… Molecules MAY share code via `<canon>/shared/`
- âœ… Molecules MUST define clear port interfaces

---

### Section 2.4 â€” Cell (Atomic Transaction Unit)

**Governing Contract:** [CONT_04_PaymentHubArchitecture.md](./CONT_04_PaymentHubArchitecture.md) (example)

**Location:** `apps/canon/<domain>/<molecule>/<cell>/`

Cells are the **atomic units** of business logic. Each Cell represents a single, well-defined transaction ledger.

| Example | Molecule | Cell | Transaction |
|---------|----------|------|-------------|
| `payment-hub/` | AP | Payment Hub | Payment governance & approval |
| `vendor-master/` | AP | Vendor Master | Vendor CRUD |
| `invoice-matching/` | AP | Invoice Match | 3-way matching |

**Architecture Pattern:** Hexagonal (Ports & Adapters)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CELL                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          DOMAIN CORE                â”‚    â”‚
â”‚  â”‚  â€¢ Entities                         â”‚    â”‚
â”‚  â”‚  â€¢ Value Objects                    â”‚    â”‚
â”‚  â”‚  â€¢ Domain Services                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                    â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ INBOUND â”‚  â”‚  PORTS  â”‚  â”‚OUTBOUND â”‚     â”‚
â”‚  â”‚  PORTS  â”‚  â”‚         â”‚  â”‚  PORTS  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚                         â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ADAPTERS â”‚              â”‚ADAPTERS â”‚      â”‚
â”‚  â”‚ (API)   â”‚              â”‚ (DB/FX) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Non-Negotiables:**
- âŒ Cells MUST NOT call other Cells directly (use Kernel Gateway)
- âŒ Cells MUST NOT share in-memory state
- âœ… Cells MUST be independently deployable
- âœ… Cells MUST have their own health endpoints

---

### Section 2.5 â€” DB (Data Fabric)

**Governing Contract:** [CONT_03_DatabaseArchitecture.md](./CONT_03_DatabaseArchitecture.md)

**Location:** `apps/db/`

The DB pillar provides **schema governance** and database operations as an intelligent abstraction layer.

| Component | Location | Purpose |
|-----------|----------|---------|
| Migrations | `apps/db/migrations/<schema>/` | Schema versioning |
| Seeds | `apps/db/seeds/<schema>/` | Test/demo data |
| Tools | `apps/db/tools/` | Schema Guardian, validators |

**Schema Isolation:**

| Schema | Owner | Purpose |
|--------|-------|---------|
| `kernel` | Kernel | Identity, sessions, audit |
| `finance` | Canon Finance | Financial transactions |
| `config` | Platform | Provider profiles, routing |

**Non-Negotiables:**
- âŒ Frontend MUST NOT connect directly to DB
- âŒ Cross-schema JOINs are FORBIDDEN
- âœ… All tables MUST have `tenant_id` (except global tables)
- âœ… All tables MUST have `created_at` timestamp
- âœ… Immutable tables (journals, audit) MUST NOT have `updated_at`

---

### Section 2.6 â€” Web (Frontend)

**Location:** `apps/web/`

The Web pillar provides the **user interface** using Next.js App Router.

| Pattern | Description |
|---------|-------------|
| **BFF (Backend for Frontend)** | Route Handlers proxy to Canon/Kernel |
| **Server Components** | Data fetching on server |
| **Client Components** | Interactive UI elements |

**Communication Flow:**

```
User â†’ Web (Next.js)
         â†“
      Route Handler (BFF)
         â†“
      Kernel Gateway (Auth)
         â†“
      Canon Cell (Business Logic)
         â†“
      DB (Data)
```

**Non-Negotiables:**
- âŒ Web MUST NOT connect directly to DB
- âŒ Web MUST NOT bypass Kernel for auth
- âœ… Web MUST use Kernel Gateway for all backend calls
- âœ… Web MUST validate user input client-side AND server-side

---

## âš–ï¸ Article III: Immutable Laws

These laws are **absolute** and cannot be overridden by any derived contract.

### Law 1: Separation of Concerns

> Each pillar has ONE primary responsibility. Pillars MUST NOT encroach on others' domains.

### Law 2: Tenant Isolation

> All tenant data MUST be isolated. Cross-tenant data access is FORBIDDEN except via explicit federation contracts.

### Law 3: Audit Trail

> Every state-changing operation MUST be recorded in `kernel.audit_events`. Audit logs are IMMUTABLE.

### Law 4: Authentication Required

> No business operation may proceed without valid authentication. The Kernel is the SOLE authenticator.

### Law 5: Schema Boundaries

> Database schemas are boundaries. Cross-schema queries are FORBIDDEN. Use API orchestration instead.

### Law 6: Cell Independence

> Cells are independently deployable. A Cell failure MUST NOT cascade to other Cells.

### Law 7: Evidence Over Trust

> The system trusts EVIDENCE (audit logs, signatures) over CLAIMS. Every claim must be verifiable.

---

## ğŸ—‚ï¸ Article IV: Directory Structure

The canonical directory structure for AI-BOS:

```
AI-BOS-Finance/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ kernel/                      # Pillar 1: Control Plane
â”‚   â”‚   â”œâ”€â”€ src/                     # Core Kernel logic
â”‚   â”‚   â”œâ”€â”€ app/api/                 # Gateway API routes
â”‚   â”‚   â””â”€â”€ docker-compose.yml
â”‚   â”‚
â”‚   â”œâ”€â”€ canon/                       # Pillar 2-4: Business Logic
â”‚   â”‚   â”œâ”€â”€ finance/                 # Canon: Finance
â”‚   â”‚   â”‚   â”œâ”€â”€ dom03-accounts-payable/    # Molecule: AP
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ payment-hub/     # Cell: Payment Hub
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ vendor-master/   # Cell: Vendor Master
â”‚   â”‚   â”‚   â”œâ”€â”€ treasury/            # Molecule: Treasury
â”‚   â”‚   â”‚   â””â”€â”€ general-ledger/      # Molecule: GL
â”‚   â”‚   â”œâ”€â”€ hrm/                     # Canon: HRM (future)
â”‚   â”‚   â””â”€â”€ crm/                     # Canon: CRM (future)
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                          # Pillar 5: Data Fabric
â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”‚   â”œâ”€â”€ kernel/
â”‚   â”‚   â”‚   â”œâ”€â”€ finance/
â”‚   â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ seeds/
â”‚   â”‚   â””â”€â”€ tools/
â”‚   â”‚
â”‚   â””â”€â”€ web/                         # Pillar 6: Frontend
â”‚       â”œâ”€â”€ app/                     # Next.js App Router
â”‚       â””â”€â”€ components/
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ canon/                       # Governance contracts
â”‚   â”‚   â””â”€â”€ A-Governance/
â”‚   â”‚       â”œâ”€â”€ A-CONT/              # Contracts (CONT_*)
â”‚   â”‚       â””â”€â”€ A-ADR/               # Architecture Decision Records
â”‚   â”œâ”€â”€ ui/                          # Shared UI components
â”‚   â””â”€â”€ shared/                      # Shared utilities
â”‚
â””â”€â”€ package.json                     # Root workspace
```

---

## ğŸ“œ Article V: Contract Hierarchy

All governance documents derive authority from this Constitution:

```
CONT_00 â€” Constitution (SUPREME)
    â”‚
    â”œâ”€â”€ CONT_01 â€” Canon Identity (Naming & Codes)
    â”‚
    â”œâ”€â”€ CONT_02 â€” Kernel Architecture (Control Plane)
    â”‚
    â”œâ”€â”€ CONT_03 â€” Database Architecture (Data Fabric)
    â”‚
    â”œâ”€â”€ CONT_04 â€” Payment Hub Architecture (Cell: AP-05)
    â”‚
    â”œâ”€â”€ CONT_05 â€” Naming & Structure
    â”‚
    â”œâ”€â”€ CONT_06 â€” Schema & Type Governance
    â”‚
    â”œâ”€â”€ CONT_07 â€” Finance Canon Architecture (NEW)
    â”‚
    â””â”€â”€ ADR_* â€” Architecture Decision Records
```

**Precedence Rules:**
1. CONT_00 (Constitution) overrides all
2. CONT_01 (Identity) defines naming conventions
3. CONT_02-04 define pillar-specific rules
4. ADRs document specific decisions within contracts

---

## âœ… Article VI: Compliance

### Verification Tools

| Tool | Location | Purpose |
|------|----------|---------|
| Schema Guardian | `apps/db/tools/validate-schema.ts` | Validates SQL migrations |
| Governance Stamps | `scripts/TOOL_03_CheckGovernanceStamps.ts` | Validates Canon codes |

### Compliance Checklist

Before any PR is merged:

- [ ] All new tables have `tenant_id` (if tenant-scoped)
- [ ] All new tables have `created_at`
- [ ] No cross-schema JOINs introduced
- [ ] Cell changes do not affect other Cells
- [ ] Kernel routes are authenticated
- [ ] Audit events are emitted for state changes
- [ ] PRD/Contract updated if architecture changes

---

## ğŸ“ Article VII: Amendments

This Constitution may be amended only by:

1. Creating an ADR documenting the proposed change
2. Updating this document with version increment
3. Approval by Architecture Team
4. Update of all derived contracts for consistency

**Amendment History:**

| Version | Date | Change |
|---------|------|--------|
| 1.0.0 | 2025-01-15 | Initial Constitution |

---

## ğŸ”— Related Documents

- [CONT_01: Canon Identity](./CONT_01_CanonIdentity.md) â€” Naming conventions
- [CONT_02: Kernel Architecture](./CONT_02_KernelArchitecture.md) â€” Control Plane
- [CONT_03: Database Architecture](./CONT_03_DatabaseArchitecture.md) â€” Data Fabric
- [CONT_04: Payment Hub Architecture](./CONT_04_PaymentHubArchitecture.md) â€” Cell: AP-05
- [CONT_05: Naming & Structure](./CONT_05_NamingAndStructure.md) â€” File Organization
- [CONT_06: Schema & Type Governance](./CONT_06_SchemaAndTypeGovernance.md) â€” Type Definitions
- [CONT_07: Finance Canon Architecture](./CONT_07_FinanceCanonArchitecture.md) â€” Finance Domain

---

**This Constitution is the supreme law of AI-BOS. All code, contracts, and decisions must align with its principles.**

---

**End of CONT_00 â€” AI-BOS Constitution v1.0.0**
